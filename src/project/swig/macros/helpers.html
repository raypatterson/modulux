{% macro get_item(slug, item) %}
  {% set resources = addResources(slug, item, page) %}
  {% set partialpath = getPartialPath(slug, item) %}
  {% if not item  %}
    {% include partialpath %}
  {% else %}
    {% set item = setDefaultsData(slug, item) %}
    {% include partialpath with item only %}
  {% endif %}
{% endmacro %}

{% macro get_items(items) %}
  {% for item in items %}
    {% set item.length = loop.length %}
    {% set item.idx = loop.index0 %}
    {{ get_item(item.partial, item) }}
  {% endfor %}
{% endmacro %}

{% macro get_items_list(items, classes, prefix) %}
  <ul class="{{ classes }}{% if prefix %} {{ prefix }}-{% endif %}list">
  {% for item in items %}
    <li class="{% if prefix %}{{ prefix }}-{% endif %}list-item {% if loop.index0 % 2 == 0 %}even{% else %}odd {% endif %} {% if loop.first %}first{% endif %}{% if loop.last %}last{% endif %}">
    {% set item.length = loop.length %}
    {% set item.idx = loop.index0 %}
    {{ get_item(item.partial, item) }}
    </li>
  {% endfor %}
  </ul>
{% endmacro %}

{% macro get_items_list_group(items) %}
  {% for item in items %}
    {% if loop.index0 % 2 == 0 %}
    <div class="group">
    {% endif %}
    {{ get_item(item.partial, item) }}
    {% if loop.index0 % 2 == 1 or loop.index0 == loop.length - 1 %}
    </div>
    {% endif %}
  {% endfor %}
{% endmacro %}